{{!< default}}

{{!-- Error handling for fun-xp-header partial --}}
{{#get "posts" limit="1" as |has_content|}}
  {{#if has_content}}
    {{> "fun-xp-header"}}
  {{else}}
    <header class="fallback-header">
      <h1>BlogBlogBlog</h1>
      <p>Welcome to my blog!</p>
    </header>
  {{/if}}
{{/get}}

{{!-- Error handling for main-nav-cards partial --}}
{{#get "posts" limit="1" as |has_content|}}
  {{#if has_content}}
    {{> "main-nav-cards"}}
  {{else}}
    <nav class="fallback-nav">
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/about">About</a></li>
      </ul>
    </nav>
  {{/if}}
{{/get}}

<section class="post-list">
    {{#if posts}}
        {{#foreach posts}}
            <article class="post-card-enhanced {{post_class}}">
                <a href="{{url}}" class="post-card-link">
                    <div class="post-card-header">
                        {{#if feature_image}}
                            <div class="post-card-image">
                                <img src="{{feature_image}}" alt="{{title}}" loading="lazy">
                            </div>
                        {{/if}}
                        <div class="post-card-content">
                            <h2 class="post-title y2k-heading">{{title}}</h2>
                            {{#if excerpt}}
                                <p class="post-excerpt">{{excerpt}}</p>
                            {{else}}
                                <p class="post-excerpt">Click to read this post...</p>
                            {{/if}}
                            
                            <!-- Enhanced post metadata -->
                            <div class="post-card-meta">
                                <div class="post-card-stats">
                                    {{#if reading_time}}
                                        <span class="post-stat">
                                            <svg class="icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <circle cx="12" cy="12" r="10"></circle>
                                                <polyline points="12,6 12,12 16,14"></polyline>
                                            </svg>
                                            {{reading_time}} min read
                                        </span>
                                    {{/if}}
                                    {{#if word_count}}
                                        <span class="post-stat">
                                            <svg class="icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                                <polyline points="14,2 14,8 20,8"></polyline>
                                                <line x1="16" y1="13" x2="8" y2="13"></line>
                                                <line x1="16" y1="17" x2="8" y2="17"></line>
                                                <polyline points="10,9 9,9 8,9"></polyline>
                                            </svg>
                                            {{word_count}} words
                                        </span>
                                    {{/if}}
                                </div>
                                
                                <div class="post-card-date">
                                    <time datetime="{{date format="YYYY-MM-DD"}}">
                                        {{date format="MMM D, YYYY"}}
                                    </time>
                                </div>
                            </div>
                            
                            {{#if tags}}
                                <div class="post-card-tags">
                                    {{#foreach tags limit="3"}}
                                        <span class="post-tag-mini">{{name}}</span>
                                    {{/foreach}}
                                    <span class="post-tag-more">+more</span>
                                </div>
                            {{/if}}
                        </div>
                    </div>
                </a>
            </article>
        {{/foreach}}
    {{else}}
        <div class="no-posts">
            <h2>No posts yet!</h2>
            <p>Check back soon for new content.</p>
        </div>
    {{/if}}
</section>

{{!-- Pagination --}}
<nav class="pagination" role="navigation" aria-label="Pagination Navigation">
    {{#if pagination}}
        <div class="pagination-container">
            {{#if prev}}
                <a class="pagination-link newer-posts" href="{{page_url prev}}" aria-label="Go to newer posts">
                    &larr; Newer Posts
                </a>
            {{/if}}
            
            <span class="pagination-info">Page {{page}} of {{pages}}</span>
            
            {{#if next}}
                <a class="pagination-link older-posts" href="{{page_url next}}" aria-label="Go to older posts">
                    Older Posts &rarr;
                </a>
            {{/if}}
        </div>
    {{/if}}
</nav>
